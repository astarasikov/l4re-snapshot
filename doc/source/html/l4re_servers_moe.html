<html>
  <head>
    <title>L4Re Reference Manual</title>      
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="tabs.css" rel="stylesheet" type="text/css">
  </HEAD>

  <body style="background: #fff url(header-bg.png) repeat-x scroll 0 0">
   <div>
    <div style="text-align: center; margin-bottom: 10px; border-width: 0 0 1px 0; border-color: #000; border-style: solid">
    L4Re - L4 Runtime Environment
    </div>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="l4re_servers.html">L4Re Servers</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Moe, the Root-Task </h1>  </div>
</div>
<div class="contents">
<p>Moe is the default Root-Task implementation for L4Re-based systems.</p>
<p><em>Moe</em> is the first task which is usually started in L4Re-based systems. The micro kernel starts <em>Moe</em> as the Root-Task.</p>
<p>Moe provides default implementation for the basic <a class="el" href="namespaceL4Re.html" title="L4 Runtime Environment.">L4Re</a> abstractions, such as data spaces (<a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a>), region maps (<a class="el" href="classL4Re_1_1Rm.html" title="Region map.">L4Re::Rm</a>), memory allocators (<a class="el" href="classL4Re_1_1Mem__alloc.html" title="Memory allocator.">L4Re::Mem_alloc</a>, <a class="el" href="classL4_1_1Factory.html" title="C++ L4 Factory, to create all kinds of kernel objects.">L4::Factory</a>), name spaces (<a class="el" href="classL4Re_1_1Namespace.html" title="Name-space interface.">L4Re::Namespace</a>) and so on (see <a class="el" href="group__api__l4re.html">L4Re Interface</a>).</p>
<p>Moe consists of the following subsystems:</p>
<ul>
<li><a class="el" href="l4re_servers_moe.html#l4re_moe_names">Name-Space Provider</a> (<a class="el" href="classL4Re_1_1Namespace.html" title="Name-space interface.">L4Re::Namespace</a>) --- provides instances of name spaces</li>
<li><a class="el" href="l4re_servers_moe.html#l4re_moe_bootfs">Boot FS</a> --- provides access to the files loaded during platform boot (e.g., linked into the boot image or loaded via GRUB boot loader)</li>
<li><a class="el" href="l4re_servers_moe.html#l4re_moe_log">Log Subsystem</a> (<a class="el" href="classL4Re_1_1Log.html" title="Log interface class.">L4Re::Log</a>) --- provides tagged log output for applications</li>
<li>l4re_moe_scheduler (<a class="el" href="classL4_1_1Scheduler.html" title="Scheduler object.">L4::Scheduler</a>) --- provides simple scheduler objects for scheduling policy enforcement</li>
<li><a class="el" href="l4re_servers_moe.html#l4re_moe_memory_alloc">Memory Allocator, Generic Factory</a> (<a class="el" href="classL4Re_1_1Mem__alloc.html" title="Memory allocator.">L4Re::Mem_alloc</a>, <a class="el" href="classL4_1_1Factory.html" title="C++ L4 Factory, to create all kinds of kernel objects.">L4::Factory</a>) --- provides allocation of physical RAM as data spaces, as well as allocation of the other <a class="el" href="namespaceL4Re.html" title="L4 Runtime Environment.">L4Re</a> objects provided by Moe</li>
</ul>
<h2><a class="anchor" id="l4re_moe_memory_alloc"></a>
Memory Allocator, Generic Factory</h2>
<p>The generic factory in Moe is responsible for all kinds of dynamic object allocation. The interface is a combination of <a class="el" href="classL4_1_1Factory.html" title="C++ L4 Factory, to create all kinds of kernel objects.">L4::Factory</a> and, for traditional reasons, <a class="el" href="classL4Re_1_1Mem__alloc.html" title="Memory allocator.">L4Re::Mem_alloc</a>. The gerneic factory interface alllows allocation of the following objects: </p>
<ul>
<li><a class="el" href="classL4Re_1_1Namespace.html" title="Name-space interface.">L4Re::Namespace</a> </li>
<li><a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a>, RAM allocation </li>
<li><a class="el" href="classL4Re_1_1Rm.html" title="Region map.">L4Re::Rm</a>, Virtual mamory management for application tasks </li>
<li><a class="el" href="classL4_1_1Vcon.html" title="C++ L4 Vcon.">L4::Vcon</a> (output only) </li>
<li><a class="el" href="classL4_1_1Scheduler.html" title="Scheduler object.">L4::Scheduler</a>, to provide a restricted priority / CPU range for clients </li>
<li><a class="el" href="classL4_1_1Factory.html" title="C++ L4 Factory, to create all kinds of kernel objects.">L4::Factory</a>, to provide a quota limited allocation for clients</li>
</ul>
<p>The memory allocator in Moe is the alternative interface for allocating memory (RAM) in terms of <a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a>-s (</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classL4Re_1_1Mem__alloc.html" title="Memory allocator.">L4Re::Mem_alloc</a>). The granularity for memory allocation is the machine page size (<a class="el" href="group__l4__memory__api.html#gabecf862d8b8f39ad28af45d7fc949dd5" title="Minimal page size (in bytes).">L4_PAGESIZE</a>).</dd></dl>
<p>The provided data spaces can have different characteristics: </p>
<ul>
<li>Physically contiguous and pre allocated </li>
<li>Non contiguous and on-demand allocated with possible copy on write (COW)</li>
</ul>
<h2><a class="anchor" id="l4re_moe_names"></a>
Name-Space Provider</h2>
<p>Moe provides a name spaces conforming to the <a class="el" href="classL4Re_1_1Namespace.html" title="Name-space interface.">L4Re::Namespace</a> interface (see <a class="el" href="group__api__l4re__namespace.html">Name-space API</a>). Per default Moe creates a single name space for the <a class="el" href="l4re_servers_moe.html#l4re_moe_bootfs">Boot FS</a>. That is available as <code>rom</code> in the initial objects of the init process.</p>
<h2><a class="anchor" id="l4re_moe_bootfs"></a>
Boot FS</h2>
<p>The Boot FS subsystem provides read only access to the files loaded during the platform boot (or available in ROM). This files are either linked into the boot image or loaded via a flexible boot loader, such as GRUB.</p>
<p>The subsystem provides an <a class="el" href="classL4Re_1_1Namespace.html" title="Name-space interface.">L4Re::Namespace</a> object as directory and an <a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a> object for each file.</p>
<h2><a class="anchor" id="l4re_moe_log"></a>
Log Subsystem</h2>
<p>The logging facility of Moe provides per application tagged and synchronized log output.</p>
<h2><a class="anchor" id="l4re_moe_options"></a>
Command-Line Options</h2>
<p>Moe command-line syntax is: </p>
<div class="fragment"><pre class="fragment"> moe [--debug=&lt;flags&gt;] [--init=&lt;binary&gt;] [--l4re-dbg=&lt;flags&gt;] [--ldr-flags=&lt;flags&gt;] [-- &lt;init options&gt;]
</pre></div><h3><a class="anchor" id="l4re_moe_option_debug"></a>
--debug=&lt;debug flags&gt;</h3>
<p>This option enables debug messages from Moe itself, the &lt;debug flags&gt; values are a combination of <code>info</code>, <code>warn</code>, <code>boot</code>, <code>server</code>, <code>loader</code>, and <code>ns</code> (or <code>all</code> for full verbosity).</p>
<h3><a class="anchor" id="l4re_moe_option_init"></a>
--init=&lt;init process&gt;</h3>
<p>This options allows to override the default init process binary, which is 'rom/ned'. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>command-line options to the init process are given after the <code>--</code> special option.</dd></dl>
<h3><a class="anchor" id="l4re_moe_option_l4re_dbg"></a>
--l4re-dbg=&lt;debug flags&gt;</h3>
<p>This option allows to set the debug options for the <a class="el" href="namespaceL4Re.html" title="L4 Runtime Environment.">L4Re</a> runtime environment of the init process. The flags are the sam as for <a class="el" href="l4re_servers_moe.html#l4re_moe_option_debug">--debug=</a>.</p>
<h3><a class="anchor" id="l4re_moe_option_ldr_flags"></a>
--ldr-flags=&lt;loader flags&gt;</h3>
<p>This option allows setting some loader options for the <a class="el" href="namespaceL4Re.html" title="L4 Runtime Environment.">L4Re</a> runtime evironment. The flags are <code>pre_alloc</code>, <code>all_segs_cow</code>,and <code>pinned_segs</code>. </p>
</div>
    <div style="background-color: #fff; border-width: 1px 0 0 0; border-color: #000; border-style: solid; text-align: center; margin-top: 10px">
    L4Re - L4 Runtime Environment
    </div>
   </div>
  </body>
</html>
