<html>
  <head>
    <title>L4Re Reference Manual</title>      
    <link href="doxygen.css" rel="stylesheet" type="text/css">
    <link href="tabs.css" rel="stylesheet" type="text/css">
  </HEAD>

  <body style="background: #fff url(header-bg.png) repeat-x scroll 0 0">
   <div>
    <div style="text-align: center; margin-bottom: 10px; border-width: 0 0 1px 0; border-color: #000; border-style: solid">
    L4Re - L4 Runtime Environment
    </div>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceL4Re.html">L4Re</a>      </li>
      <li><a class="el" href="namespaceL4Re_1_1Vfs.html">Vfs</a>      </li>
      <li><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html">L4Re::Vfs::Regular_file</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>L4Re::Vfs::Regular_file Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="L4Re::Vfs::Regular_file" -->
<p>Interface for a POSIX file that provides regular file semantics.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vfs_8h_source.html">vfs.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for L4Re::Vfs::Regular_file:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classL4Re_1_1Vfs_1_1Regular__file__inherit__graph.png" border="0" usemap="#L4Re_1_1Vfs_1_1Regular__file_inherit__map" alt="Inheritance graph"/></div>
<map name="L4Re_1_1Vfs_1_1Regular__file_inherit__map" id="L4Re_1_1Vfs_1_1Regular__file_inherit__map">
<area shape="rect" id="node3" href="classL4Re_1_1Vfs_1_1File.html" title="The basic interface for an open POSIX file." alt="" coords="25,331,148,573"/><area shape="rect" id="node5" href="classL4Re_1_1Vfs_1_1Be__file.html" title="Boiler plate class for implementing an open file for L4Re::Vfs." alt="" coords="11,621,163,1227"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4Re_1_1Dataspace.html">L4Re::Dataspace</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a3ea4ea2627480102cf5b4de61e9c024a">data_space</a> () const =0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get an <a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a> object for the file.  <a href="#a3ea4ea2627480102cf5b4de61e9c024a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a7eb80dd11ad7e5e5d9bce779e787082c">readv</a> (const struct iovec *, int iovcnt)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read one or more blocks of data from the file.  <a href="#a7eb80dd11ad7e5e5d9bce779e787082c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a1274a04f3b1b1360428f563ddb094100">writev</a> (const struct iovec *, int iovcnt)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write one or more blocks of data to the file.  <a href="#a1274a04f3b1b1360428f563ddb094100"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual off64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a04fbd1db0225cca399b5a4b20be23833">lseek64</a> (off64_t, int)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the file pointer.  <a href="#a04fbd1db0225cca399b5a4b20be23833"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a5369932e9290319cb8097b5a2a883b9e">ftruncate64</a> (off64_t pos)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Truncate the file at the given position.  <a href="#a5369932e9290319cb8097b5a2a883b9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#ab12823b36bdc8d13132f3c422c429227">fsync</a> () const =0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sync the data and meta data to persistent storage.  <a href="#ab12823b36bdc8d13132f3c422c429227"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#adeb794a0022d1565e669cad6c8ade0e5">fdatasync</a> () const =0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sync the data to persistent storage.  <a href="#adeb794a0022d1565e669cad6c8ade0e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a0050b1fdad9f5f87b3cd1bf0f981c864">get_lock</a> (struct flock64 *lock)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if the given lock can be placed in the file.  <a href="#a0050b1fdad9f5f87b3cd1bf0f981c864"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4Re_1_1Vfs_1_1Regular__file.html#a68917e7790e4aa014056e3d2749a654f">set_lock</a> (struct flock64 *lock, bool wait)=0  throw ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquire or release the given lock on the file.  <a href="#a68917e7790e4aa014056e3d2749a654f"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Interface for a POSIX file that provides regular file semantics. </p>
<p>Real objects use always the combined <a class="el" href="classL4Re_1_1Vfs_1_1File.html" title="The basic interface for an open POSIX file.">L4Re::Vfs::File</a> interface. </p>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00261">261</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3ea4ea2627480102cf5b4de61e9c024a"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::data_space" ref="a3ea4ea2627480102cf5b4de61e9c024a" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt;<a class="el" href="classL4Re_1_1Dataspace.html">L4Re::Dataspace</a>&gt; L4Re::Vfs::Regular_file::data_space </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get an <a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a> object for the file. </p>
<p>This is used as a backend for POSIX mmap and mmap2 functions. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>mmap is not possible if the functions returns an invalid capability.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A capability to an <a class="el" href="classL4Re_1_1Dataspace.html" title="This class represents a data space.">L4Re::Dataspace</a>, that represents the files contents in an <a class="el" href="namespaceL4Re.html" title="L4 Runtime Environment.">L4Re</a> way. </dd></dl>

</div>
</div>
<a class="anchor" id="a7eb80dd11ad7e5e5d9bce779e787082c"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::readv" ref="a7eb80dd11ad7e5e5d9bce779e787082c" args="(const struct iovec *, int iovcnt)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ssize_t L4Re::Vfs::Regular_file::readv </td>
          <td>(</td>
          <td class="paramtype">const struct iovec *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iovcnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read one or more blocks of data from the file. </p>
<p>This function acts as backend for POSIX read and readv calls and reads data starting for the f_pos pointer of that open file. The file pointer is advanced according to the number of red bytes.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes red from the file. or &lt;0 on error- </dd></dl>

</div>
</div>
<a class="anchor" id="a1274a04f3b1b1360428f563ddb094100"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::writev" ref="a1274a04f3b1b1360428f563ddb094100" args="(const struct iovec *, int iovcnt)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ssize_t L4Re::Vfs::Regular_file::writev </td>
          <td>(</td>
          <td class="paramtype">const struct iovec *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iovcnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write one or more blocks of data to the file. </p>
<p>This function acts as backend for POSIX write and writev calls. The data is written starting at the current file pointer and the file pointer must be advanced according to the number of written bytes.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes written to the file, or &lt;0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="a04fbd1db0225cca399b5a4b20be23833"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::lseek64" ref="a04fbd1db0225cca399b5a4b20be23833" args="(off64_t, int)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual off64_t L4Re::Vfs::Regular_file::lseek64 </td>
          <td>(</td>
          <td class="paramtype">off64_t&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the file pointer. </p>
<p>This is the backend for POSIX seek, lseek and friends.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The new file position, or &lt;0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="a5369932e9290319cb8097b5a2a883b9e"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::ftruncate64" ref="a5369932e9290319cb8097b5a2a883b9e" args="(off64_t pos)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int L4Re::Vfs::Regular_file::ftruncate64 </td>
          <td>(</td>
          <td class="paramtype">off64_t&nbsp;</td>
          <td class="paramname"> <em>pos</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Truncate the file at the given position. </p>
<p>This function is the backend for truncate and friends. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>The offset at which the file shall be truncated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, or &lt;0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ab12823b36bdc8d13132f3c422c429227"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::fsync" ref="ab12823b36bdc8d13132f3c422c429227" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int L4Re::Vfs::Regular_file::fsync </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sync the data and meta data to persistent storage. </p>
<p>This is the backend for POSIX fsync. </p>

</div>
</div>
<a class="anchor" id="adeb794a0022d1565e669cad6c8ade0e5"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::fdatasync" ref="adeb794a0022d1565e669cad6c8ade0e5" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int L4Re::Vfs::Regular_file::fdatasync </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sync the data to persistent storage. </p>
<p>This is the backend for POSIX fdatasync. </p>

</div>
</div>
<a class="anchor" id="a0050b1fdad9f5f87b3cd1bf0f981c864"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::get_lock" ref="a0050b1fdad9f5f87b3cd1bf0f981c864" args="(struct flock64 *lock)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int L4Re::Vfs::Regular_file::get_lock </td>
          <td>(</td>
          <td class="paramtype">struct flock64 *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test if the given lock can be placed in the file. </p>
<p>This function is used as backend for fcntl F_GETLK commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lock</em>&nbsp;</td><td>The lock that shall be placed on the file. The <em>l_type</em> member will contain F_UNLCK if the lock could be placed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, &lt;0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="a68917e7790e4aa014056e3d2749a654f"></a><!-- doxytag: member="L4Re::Vfs::Regular_file::set_lock" ref="a68917e7790e4aa014056e3d2749a654f" args="(struct flock64 *lock, bool wait)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int L4Re::Vfs::Regular_file::set_lock </td>
          <td>(</td>
          <td class="paramtype">struct flock64 *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>wait</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ()<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Acquire or release the given lock on the file. </p>
<p>This function is used as backend for fcntl F_SETLK and F_SETLKW commands. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lock</em>&nbsp;</td><td>The lock that shall be placed on the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait</em>&nbsp;</td><td>If true, then block if there is a conflicting lock on the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, &lt;0 on error. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4re_vfs/<a class="el" href="vfs_8h_source.html">vfs.h</a></li>
</ul>
</div>
    <div style="background-color: #fff; border-width: 1px 0 0 0; border-color: #000; border-style: solid; text-align: center; margin-top: 10px">
    L4Re - L4 Runtime Environment
    </div>
   </div>
  </body>
</html>
